<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Cloudy Skies</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      background: linear-gradient(to top, #87ceeb, #ffffff);
      font-family: 'Arial', sans-serif;
    }
    #gameCanvas {
      display: block;
      margin: 0 auto;
      background: #cceeff;
      touch-action: none;
    }
    #ui {
      position: absolute;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      color: #333;
      font-size: 20px;
      font-weight: bold;
      background: rgba(255,255,255,0.7);
      padding: 5px 10px;
      border-radius: 10px;
    }
  </style>
</head>
<body>
<canvas id="gameCanvas"></canvas>
<div id="ui">Score: 0</div>
<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
let W = innerWidth, H = innerHeight;
canvas.width = W; canvas.height = H;

let score = 0;
let clouds = [], sunbeams = [], enemies = [], particles = [];
let gameOver = false;

const ui = document.getElementById("ui");
let plane = {
  x: 100, y: H/2, w: 40, h: 20,
  vx: 0, vy: 0,
  update() {
    this.vy += 0.3;
    this.y += this.vy;
    if (this.y < 0) this.y = 0;
    if (this.y + this.h > H) {
      this.y = H - this.h;
      this.vy = 0;
    }
  },
  draw() {
    ctx.fillStyle = "#fff";
    ctx.beginPath();
    ctx.moveTo(this.x, this.y);
    ctx.lineTo(this.x - this.w, this.y + this.h/2);
    ctx.lineTo(this.x, this.y + this.h);
    ctx.closePath();
    ctx.fill();
    ctx.strokeStyle = "#aaa";
    ctx.stroke();
  }
};

function spawnClouds() {
  clouds.push({
    x: W + Math.random()*200,
    y: Math.random() * H * 0.8,
    r: 30 + Math.random()*30,
    speed: 1 + Math.random() * 1
  });
}
function spawnSunbeam() {
  sunbeams.push({
    x: W + 50, y: Math.random() * H,
    r: 8 + Math.random()*5
  });
}
function spawnEnemy() {
  enemies.push({
    x: W + 50, y: Math.random() * H,
    r: 20, vx: -3
  });
}
function drawCloud(c) {
  ctx.fillStyle = "#fff";
  ctx.beginPath();
  ctx.arc(c.x, c.y, c.r, 0, Math.PI*2);
  ctx.fill();
}
function drawSunbeam(s) {
  ctx.fillStyle = "yellow";
  ctx.beginPath();
  ctx.arc(s.x, s.y, s.r, 0, Math.PI*2);
  ctx.fill();
}
function drawEnemy(e) {
  ctx.fillStyle = "#444";
  ctx.beginPath();
  ctx.arc(e.x, e.y, e.r, 0, Math.PI*2);
  ctx.fill();
}

function resetGame() {
  clouds = []; sunbeams = []; enemies = [];
  score = 0; gameOver = false;
  plane.x = 100; plane.y = H/2; plane.vy = 0;
}

function loop() {
  if (gameOver) {
    ctx.fillStyle = "rgba(0,0,0,0.5)";
    ctx.fillRect(0, 0, W, H);
    ctx.fillStyle = "#fff";
    ctx.font = "40px Arial";
    ctx.textAlign = "center";
    ctx.fillText("Game Over", W/2, H/2);
    ctx.font = "20px Arial";
    ctx.fillText("Tap to restart", W/2, H/2 + 40);
    return;
  }

  ctx.clearRect(0, 0, W, H);
  if (Math.random() < 0.02) spawnClouds();
  if (Math.random() < 0.01) spawnSunbeam();
  if (Math.random() < 0.005) spawnEnemy();

  for (let c of clouds) {
    c.x -= c.speed;
    drawCloud(c);
  }
  for (let s of sunbeams) {
    s.x -= 3;
    drawSunbeam(s);
    if (isCollide(plane, s)) {
      score++;
      sunbeams.splice(sunbeams.indexOf(s), 1);
    }
  }
  for (let e of enemies) {
    e.x += e.vx;
    drawEnemy(e);
    if (isCollide(plane, e)) gameOver = true;
  }

  clouds = clouds.filter(c => c.x + c.r > 0);
  sunbeams = sunbeams.filter(s => s.x + s.r > 0);
  enemies = enemies.filter(e => e.x + e.r > 0);

  plane.update();
  plane.draw();
  ui.innerText = "Score: " + score;

  requestAnimationFrame(loop);
}
function isCollide(a, b) {
  let dx = (a.x + a.w/2) - b.x;
  let dy = (a.y + a.h/2) - b.y;
  let dist = Math.sqrt(dx*dx + dy*dy);
  return dist < (b.r + a.w/2);
}

window.addEventListener("resize", () => {
  W = innerWidth;
  H = innerHeight;
  canvas.width = W;
  canvas.height = H;
});

canvas.addEventListener("pointerdown", e => {
  if (gameOver) {
    resetGame();
    loop();
  } else {
    plane.vy = -6;
  }
});
document.addEventListener("keydown", e => {
  if (e.code === "Space") plane.vy = -6;
});

resetGame();
loop();
</script>
</body>
</html>
